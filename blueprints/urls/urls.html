{% extends '_layout.html' %}
{% set title = 'URLs' %}

{% block body %}

    {% from 'bootstrap/form.html' import render_form %}

    <div class="card mb-4">
        <div class="card-header" id="headingOne" type="button" data-toggle="collapse" data-target="#collapse"
             aria-expanded="true" aria-controls="collapse">
            Filters
        </div>

        <div id="collapse" class="collapse {{ '' if collapse else 'show' }}" aria-labelledby="headingOne">
            <div class="card-body">
                {{ render_form(form, button_map={'apply': 'primary'}) }}
            </div>
        </div>
    </div>

    {% if urls %}
        {% if urls.total %}
            <p>{{ urls.total }} URLs found.</p>

            {% if urls.has_prev or urls.has_next %}
                {% from 'includes/_macros.html' import render_post_navigation %}
                {{ render_post_navigation(urls) }}
            {% endif %}

            <table class="table table-sm table-hover">
                {% for url in urls.items %}
                    <tr>
                        <td>
                            <a class="ml-2" href="{{ url_for('.details', id=url.id) }}">
                                <span class="oi oi-eye"></span>
                            </a>
                        </td>
                        <td>
                            <a class="card-link ml-2" href="{{ url.id }}" target="_blank">
                                <span class="oi oi-external-link"></span>
                            </a>
                        </td>
                        <td class="text-right">{{ url.count }}</td>
                        <td>
                            <code>{{ url.id }}</code>
                        </td>
                    </tr>
                {% endfor %}
            </table>
        {% else %}
            <p class="alert alert-danger">No URL match this search.</p>
        {% endif %}
    {% endif %}

{% endblock %}