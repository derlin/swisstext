
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Searching commandline tool &#8212; SwissText  documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command line searching tools" href="swisstext.cmd.searching.tools.html" />
    <link rel="prev" title="Pipeline implementation" href="swisstext.cmd.scraping.impl.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="swisstext.cmd.searching.tools.html" title="Command line searching tools"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="swisstext.cmd.scraping.impl.html" title="Pipeline implementation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SwissText  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="apireference.html" >API Reference</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="swisstext.cmd.html" accesskey="U">Commandline tools</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-swisstext.cmd.searching">
<span id="searching-commandline-tool"></span><h1>Searching commandline tool<a class="headerlink" href="#module-swisstext.cmd.searching" title="Permalink to this headline">¶</a></h1>
<p>The searching module uses seeds to query search engines and discover new URLs to scrape.</p>
<div class="section" id="st-search">
<h2>st_search<a class="headerlink" href="#st-search" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>st_search <span class="o">[</span>OPTIONS<span class="o">]</span> COMMAND <span class="o">[</span>ARGS<span class="o">]</span>...
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-st-search-l">
<code class="descname">-l</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--log-level</code><code class="descclassname"> &lt;log_level&gt;</code><a class="headerlink" href="#cmdoption-st-search-l" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="option">
<dt id="cmdoption-st-search-d">
<code class="descname">-d</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--db</code><code class="descclassname"> &lt;db&gt;</code><a class="headerlink" href="#cmdoption-st-search-d" title="Permalink to this definition">¶</a></dt>
<dd><p>If set, this will override the database set in the config</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-st-search-c">
<code class="descname">-c</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--config-path</code><code class="descclassname"> &lt;config_path&gt;</code><a class="headerlink" href="#cmdoption-st-search-c" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<div class="section" id="st-search-dump-config">
<h3>dump_config<a class="headerlink" href="#st-search-dump-config" title="Permalink to this headline">¶</a></h3>
<p>Prints the active configuration. If &lt;test&gt; is set, the search engine is also instantiated,
ensuring all tool names exist and use correct options.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>st_search dump_config <span class="o">[</span>OPTIONS<span class="o">]</span>
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-st-search-dump-config-t">
<code class="descname">-t</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--test</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-st-search-dump-config-t" title="Permalink to this definition">¶</a></dt>
<dd><p>Also instantiate the tools</p>
</dd></dl>

</div>
<div class="section" id="st-search-from-file">
<h3>from_file<a class="headerlink" href="#st-search-from-file" title="Permalink to this headline">¶</a></h3>
<p>Search using seeds from a file.</p>
<p>This script runs the search engine using the query terms present in a file.
The file should have one seed per line; any line starting with a space will ignored.
Seeds and results will be persisted using the configured saver.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>st_search from_file <span class="o">[</span>OPTIONS<span class="o">]</span> SEEDSFILE
</pre></div>
</div>
<p class="rubric">Arguments</p>
<dl class="option">
<dt id="cmdoption-st-search-from-file-arg-seedsfile">
<code class="descname">SEEDSFILE</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-st-search-from-file-arg-seedsfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

</div>
<div class="section" id="st-search-from-mongo">
<h3>from_mongo<a class="headerlink" href="#st-search-from-mongo" title="Permalink to this headline">¶</a></h3>
<p>This script runs the search engine system using -n seeds pulled from Mongo. Those seeds are
selected depending on the number of usages and the date of the last use (less used first, oldest usage first).
If –new is specified, only seeds that have never been used will be queried.
If –any is specified, exactly -n seeds are selected.</p>
<p>Note that to connect to MongoDB, it relies on the host, port and db options present in the <cite>saver_options</cite> property
of the configuration. So whatever saver you use, ensure that those properties are correct
(default: localhost:27017, db=swisstext).</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>st_search from_mongo <span class="o">[</span>OPTIONS<span class="o">]</span>
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-st-search-from-mongo-n">
<code class="descname">-n</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--num-seeds</code><code class="descclassname"> &lt;num_seeds&gt;</code><a class="headerlink" href="#cmdoption-st-search-from-mongo-n" title="Permalink to this definition">¶</a></dt>
<dd><p>Max seeds used.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-st-search-from-mongo-new">
<code class="descname">--new</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--any</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-st-search-from-mongo-new" title="Permalink to this definition">¶</a></dt>
<dd><p>Only search new seeds</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-swisstext.cmd.searching.interfaces">
<span id="tool-interfaces"></span><h2>Tool interfaces<a class="headerlink" href="#module-swisstext.cmd.searching.interfaces" title="Permalink to this headline">¶</a></h2>
<p>This module defines interfaces for each tool or decision maker used in the searching process.
This makes it easy to test new ways or to tune one aspect of the search engine while keeping most of the code unchanged.</p>
<p>See the <a class="reference internal" href="swisstext.cmd.searching.tools.html#module-swisstext.cmd.searching.tools" title="swisstext.cmd.searching.tools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">swisstext.cmd.searching.tools</span></code></a> module for implementations.</p>
<dl class="class">
<dt id="swisstext.cmd.searching.interfaces.ISaver">
<em class="property">class </em><code class="descclassname">swisstext.cmd.searching.interfaces.</code><code class="descname">ISaver</code><a class="reference internal" href="_modules/swisstext/cmd/searching/interfaces.html#ISaver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.interfaces.ISaver" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></a></p>
<p>[ABSTRACT] The saver is responsible for persisting everything somewhere, such as a database, a file or the console.</p>
<dl class="method">
<dt id="swisstext.cmd.searching.interfaces.ISaver.link_exists">
<code class="descname">link_exists</code><span class="sig-paren">(</span><em>url: str</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/swisstext/cmd/searching/interfaces.html#ISaver.link_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.interfaces.ISaver.link_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if the url already exists in the persistence layer. Returns false by default.</p>
</dd></dl>

<dl class="method">
<dt id="swisstext.cmd.searching.interfaces.ISaver.save_seed">
<code class="descname">save_seed</code><span class="sig-paren">(</span><em>seed: swisstext.cmd.searching.data.Seed</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swisstext/cmd/searching/interfaces.html#ISaver.save_seed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.interfaces.ISaver.save_seed" title="Permalink to this definition">¶</a></dt>
<dd><p>[ABSTRACT] Should persist a seed and its associated results.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="swisstext.cmd.searching.interfaces.ISearcher">
<em class="property">class </em><code class="descclassname">swisstext.cmd.searching.interfaces.</code><code class="descname">ISearcher</code><a class="reference internal" href="_modules/swisstext/cmd/searching/interfaces.html#ISearcher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.interfaces.ISearcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></a></p>
<p>[ABSTRACT] This tool is the core of the pipeline: it is an interface to a real search engine.</p>
<dl class="method">
<dt id="swisstext.cmd.searching.interfaces.ISearcher.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span> &#x2192; Iterable[str]<a class="reference internal" href="_modules/swisstext/cmd/searching/interfaces.html#ISearcher.search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.interfaces.ISearcher.search" title="Permalink to this definition">¶</a></dt>
<dd><p>[ABSTRACT] Should query a real search engine and returns an iterator of results/URLs.
The use of an iterator allows for lazy implementations, in case we are limited by an API quota.</p>
</dd></dl>

<dl class="method">
<dt id="swisstext.cmd.searching.interfaces.ISearcher.top_results">
<code class="descname">top_results</code><span class="sig-paren">(</span><em>query</em>, <em>max_results=10</em><span class="sig-paren">)</span> &#x2192; List[T]<a class="reference internal" href="_modules/swisstext/cmd/searching/interfaces.html#ISearcher.top_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.interfaces.ISearcher.top_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the <a class="reference internal" href="#swisstext.cmd.searching.interfaces.ISearcher.search" title="swisstext.cmd.searching.interfaces.ISearcher.search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search()</span></code></a> to return the x top results for a query.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tool-implementations">
<h2>Tool implementations<a class="headerlink" href="#tool-implementations" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="swisstext.cmd.searching.tools.html">Command line searching tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="swisstext.cmd.searching.tools.html#module-swisstext.cmd.searching.tools.console_saver">Savers</a></li>
<li class="toctree-l2"><a class="reference internal" href="swisstext.cmd.searching.tools.html#module-swisstext.cmd.searching.tools.google_search">Searchers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="swisstext.cmd.searching.tools.html#example-usages">Example usages</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="pipeline-implementation">
<h2>Pipeline implementation<a class="headerlink" href="#pipeline-implementation" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="swisstext.cmd.searching.impl.html">Pipeline implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="swisstext.cmd.searching.impl.html#module-swisstext.cmd.searching.config">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="swisstext.cmd.searching.impl.html#module-swisstext.cmd.searching.data">Data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="swisstext.cmd.searching.impl.html#module-swisstext.cmd.searching.pipeline">Search engine</a></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Searching commandline tool</a><ul>
<li><a class="reference internal" href="#st-search">st_search</a><ul>
<li><a class="reference internal" href="#st-search-dump-config">dump_config</a></li>
<li><a class="reference internal" href="#st-search-from-file">from_file</a></li>
<li><a class="reference internal" href="#st-search-from-mongo">from_mongo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swisstext.cmd.searching.interfaces">Tool interfaces</a></li>
<li><a class="reference internal" href="#tool-implementations">Tool implementations</a></li>
<li><a class="reference internal" href="#pipeline-implementation">Pipeline implementation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="swisstext.cmd.scraping.impl.html"
                        title="previous chapter">Pipeline implementation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="swisstext.cmd.searching.tools.html"
                        title="next chapter">Command line searching tools</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/swisstext.cmd.searching.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="swisstext.cmd.searching.tools.html" title="Command line searching tools"
             >next</a> |</li>
        <li class="right" >
          <a href="swisstext.cmd.scraping.impl.html" title="Pipeline implementation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SwissText  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="apireference.html" >API Reference</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="swisstext.cmd.html" >Commandline tools</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Lucy Linder.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.1.
    </div>
  </body>
</html>