
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Searching commandline tool &#8212; SwissText  documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command line searching tools" href="swisstext.cmd.searching.tools.html" />
    <link rel="prev" title="Command line scraping tools" href="swisstext.cmd.scraping.tools.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="swisstext.cmd.searching.tools.html" title="Command line searching tools"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="swisstext.cmd.scraping.tools.html" title="Command line scraping tools"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SwissText  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="apireference.html" >API Reference</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="swisstext.cmd.html" accesskey="U">Commandline tools</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-swisstext.cmd.searching">
<span id="searching-commandline-tool"></span><h1>Searching commandline tool<a class="headerlink" href="#module-swisstext.cmd.searching" title="Permalink to this headline">¶</a></h1>
<p>The searching module uses seeds to query search engines and discover new URLs to scrape.</p>
<span class="target" id="module-swisstext.cmd.searching.commandline"></span><p>This module contains the commandline interface for the searcher.</p>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Use the <cite>–help</cite> option to discover the capabilities and options of the tool.</p>
</div>
<div class="section" id="module-swisstext.cmd.searching.interfaces">
<span id="tool-interfaces"></span><h2>Tool interfaces<a class="headerlink" href="#module-swisstext.cmd.searching.interfaces" title="Permalink to this headline">¶</a></h2>
<p>This module defines interfaces for each tool or decision maker used in the searching process.
This makes it easy to test new ways or to tune one aspect of the search engine while keeping most of the code unchanged.</p>
<p>See the <a class="reference internal" href="swisstext.cmd.searching.tools.html#module-swisstext.cmd.searching.tools" title="swisstext.cmd.searching.tools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">swisstext.cmd.searching.tools</span></code></a> module for implementations.</p>
<dl class="class">
<dt id="swisstext.cmd.searching.interfaces.ISaver">
<em class="property">class </em><code class="descclassname">swisstext.cmd.searching.interfaces.</code><code class="descname">ISaver</code><a class="reference internal" href="_modules/swisstext/cmd/searching/interfaces.html#ISaver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.interfaces.ISaver" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></a></p>
<p>[ABSTRACT] The saver is responsible for persisting everything somewhere, such as a database, a file or the console.</p>
<dl class="method">
<dt id="swisstext.cmd.searching.interfaces.ISaver.link_exists">
<code class="descname">link_exists</code><span class="sig-paren">(</span><em>url: str</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/swisstext/cmd/searching/interfaces.html#ISaver.link_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.interfaces.ISaver.link_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if the url already exists in the persistence layer. Returns false by default.</p>
</dd></dl>

<dl class="method">
<dt id="swisstext.cmd.searching.interfaces.ISaver.save_seed">
<code class="descname">save_seed</code><span class="sig-paren">(</span><em>seed: swisstext.cmd.searching.data.Seed</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swisstext/cmd/searching/interfaces.html#ISaver.save_seed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.interfaces.ISaver.save_seed" title="Permalink to this definition">¶</a></dt>
<dd><p>[ABSTRACT] Should persist a seed and its associated results.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="swisstext.cmd.searching.interfaces.ISearcher">
<em class="property">class </em><code class="descclassname">swisstext.cmd.searching.interfaces.</code><code class="descname">ISearcher</code><a class="reference internal" href="_modules/swisstext/cmd/searching/interfaces.html#ISearcher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.interfaces.ISearcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></a></p>
<p>[ABSTRACT] This tool is the core of the pipeline: it is an interface to a real search engine.</p>
<dl class="method">
<dt id="swisstext.cmd.searching.interfaces.ISearcher.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span> &#x2192; Iterable[str]<a class="reference internal" href="_modules/swisstext/cmd/searching/interfaces.html#ISearcher.search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.interfaces.ISearcher.search" title="Permalink to this definition">¶</a></dt>
<dd><p>[ABSTRACT] Should query a real search engine and returns an iterator of results/URLs.
The use of an iterator allows for lazy implementations, in case we are limited by an API quota.</p>
</dd></dl>

<dl class="method">
<dt id="swisstext.cmd.searching.interfaces.ISearcher.top_results">
<code class="descname">top_results</code><span class="sig-paren">(</span><em>query</em>, <em>max_results=10</em><span class="sig-paren">)</span> &#x2192; List<a class="reference internal" href="_modules/swisstext/cmd/searching/interfaces.html#ISearcher.top_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.interfaces.ISearcher.top_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the <a class="reference internal" href="#swisstext.cmd.searching.interfaces.ISearcher.search" title="swisstext.cmd.searching.interfaces.ISearcher.search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search()</span></code></a> to return the x top results for a query.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tool-implementations">
<h2>Tool implementations<a class="headerlink" href="#tool-implementations" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="swisstext.cmd.searching.tools.html">Command line searching tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="swisstext.cmd.searching.tools.html#module-swisstext.cmd.searching.tools.console_saver">Savers</a></li>
<li class="toctree-l2"><a class="reference internal" href="swisstext.cmd.searching.tools.html#module-swisstext.cmd.searching.tools.google_search">Searchers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="swisstext.cmd.searching.tools.html#example-usages">Example usages</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="module-swisstext.cmd.searching.config">
<span id="configuration"></span><h2>Configuration<a class="headerlink" href="#module-swisstext.cmd.searching.config" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="swisstext.cmd.searching.config.Config">
<em class="property">class </em><code class="descclassname">swisstext.cmd.searching.config.</code><code class="descname">Config</code><span class="sig-paren">(</span><em>config: Union[str</em>, <em>dict</em>, <em>io.IOBase] = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swisstext/cmd/searching/config.html#Config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.config.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="swisstext.cmd.html#swisstext.cmd.base_config.BaseConfig" title="swisstext.cmd.base_config.BaseConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">swisstext.cmd.base_config.BaseConfig</span></code></a></p>
<p>The default configuration file for the searching pipeline (search engine) is defined in <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>.
This is the best way to understand what options are available.</p>
<dl class="class">
<dt id="swisstext.cmd.searching.config.Config.Options">
<em class="property">class </em><code class="descname">Options</code><span class="sig-paren">(</span><em>max_results=10</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swisstext/cmd/searching/config.html#Config.Options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.config.Config.Options" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="attribute">
<dt id="swisstext.cmd.searching.config.Config.Options.max_results">
<code class="descname">max_results</code><em class="property"> = None</em><a class="headerlink" href="#swisstext.cmd.searching.config.Config.Options.max_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Max number of URLs retrieved in one search.
Note that this is only the number of URLs returned by the search engine, not the number of
URLs added to the db. Indeed, duplicates or uninteresting URLs won’t be saved.</p>
</dd></dl>

</dd></dl>

<dl class="method">
<dt id="swisstext.cmd.searching.config.Config.create_search_engine">
<code class="descname">create_search_engine</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; swisstext.cmd.searching.pipeline.SearchEngine<a class="reference internal" href="_modules/swisstext/cmd/searching/config.html#Config.create_search_engine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.config.Config.create_search_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate a search engine from the YAML configuration.</p>
</dd></dl>

<dl class="attribute">
<dt id="swisstext.cmd.searching.config.Config.interfaces_package">
<code class="descname">interfaces_package</code><a class="headerlink" href="#swisstext.cmd.searching.config.Config.interfaces_package" title="Permalink to this definition">¶</a></dt>
<dd><p>Should return the complete package where the interfaces are defined, if any.
In case this is defined and a tool is missing from the list, we will try to instantiate
the interface instead.</p>
</dd></dl>

<dl class="attribute">
<dt id="swisstext.cmd.searching.config.Config.tool_entry_name">
<code class="descname">tool_entry_name</code><a class="headerlink" href="#swisstext.cmd.searching.config.Config.tool_entry_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Should return the name of the tool_entries option, i.e. the YAML path to the dictionary of
[interface name, canonical class to instantiate].</p>
</dd></dl>

<dl class="attribute">
<dt id="swisstext.cmd.searching.config.Config.valid_tool_entries">
<code class="descname">valid_tool_entries</code><a class="headerlink" href="#swisstext.cmd.searching.config.Config.valid_tool_entries" title="Permalink to this definition">¶</a></dt>
<dd><p>Should return the list of valid tool entries under the <a class="reference internal" href="#swisstext.cmd.searching.config.Config.tool_entry_name" title="swisstext.cmd.searching.config.Config.tool_entry_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">tool_entry_name</span></code></a>.
Note that the order of tools in the list defines the order of tools instances returned by
<code class="xref py py-meth docutils literal notranslate"><span class="pre">instantiate_tools()</span></code>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-swisstext.cmd.searching.data">
<span id="pipeline-implementation"></span><h2>Pipeline implementation<a class="headerlink" href="#module-swisstext.cmd.searching.data" title="Permalink to this headline">¶</a></h2>
<p>This module defines the generic data structures used across the module / between the different tools.
They have been thought to be decoupled from MongoDB for better flexibility/adaptability.</p>
<dl class="class">
<dt id="swisstext.cmd.searching.data.Seed">
<em class="property">class </em><code class="descclassname">swisstext.cmd.searching.data.</code><code class="descname">Seed</code><span class="sig-paren">(</span><em>query: str</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swisstext/cmd/searching/data.html#Seed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.data.Seed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Holds informations on a seed, i.e. a query.</p>
<dl class="attribute">
<dt id="swisstext.cmd.searching.data.Seed.new_links">
<code class="descname">new_links</code><em class="property"> = None</em><a class="headerlink" href="#swisstext.cmd.searching.data.Seed.new_links" title="Permalink to this definition">¶</a></dt>
<dd><p>the new links found after the search</p>
</dd></dl>

<dl class="attribute">
<dt id="swisstext.cmd.searching.data.Seed.query">
<code class="descname">query</code><em class="property"> = None</em><a class="headerlink" href="#swisstext.cmd.searching.data.Seed.query" title="Permalink to this definition">¶</a></dt>
<dd><p>the query terms</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-swisstext.cmd.searching.pipeline"></span><p>This module contains the core of the searching system.</p>
<dl class="class">
<dt id="swisstext.cmd.searching.pipeline.SearchEngine">
<em class="property">class </em><code class="descclassname">swisstext.cmd.searching.pipeline.</code><code class="descname">SearchEngine</code><span class="sig-paren">(</span><em>searcher: swisstext.cmd.searching.interfaces.ISearcher</em>, <em>saver: swisstext.cmd.searching.interfaces.ISaver</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swisstext/cmd/searching/pipeline.html#SearchEngine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.pipeline.SearchEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The search engine implements all the logic of searching seeds and persisting results.</p>
<p>Note that this class is usually instantiated by a <a class="reference internal" href="#swisstext.cmd.searching.config.Config" title="swisstext.cmd.searching.config.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> object.</p>
<dl class="attribute">
<dt id="swisstext.cmd.searching.pipeline.SearchEngine.new_urls">
<code class="descname">new_urls</code><em class="property"> = None</em><a class="headerlink" href="#swisstext.cmd.searching.pipeline.SearchEngine.new_urls" title="Permalink to this definition">¶</a></dt>
<dd><p>the list of URLs discovered during the lifetime of the object</p>
</dd></dl>

<dl class="method">
<dt id="swisstext.cmd.searching.pipeline.SearchEngine.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>seeds: List[swisstext.cmd.searching.data.Seed], max_results=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swisstext/cmd/searching/pipeline.html#SearchEngine.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swisstext.cmd.searching.pipeline.SearchEngine.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the magic.</p>
<p>Note that this method has not been implemented having multithreading in minds, as most of the time
search engine APIs are limited and pretty fast…</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Searching commandline tool</a><ul>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#module-swisstext.cmd.searching.interfaces">Tool interfaces</a></li>
<li><a class="reference internal" href="#tool-implementations">Tool implementations</a></li>
<li><a class="reference internal" href="#module-swisstext.cmd.searching.config">Configuration</a></li>
<li><a class="reference internal" href="#module-swisstext.cmd.searching.data">Pipeline implementation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="swisstext.cmd.scraping.tools.html"
                        title="previous chapter">Command line scraping tools</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="swisstext.cmd.searching.tools.html"
                        title="next chapter">Command line searching tools</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/swisstext.cmd.searching.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="swisstext.cmd.searching.tools.html" title="Command line searching tools"
             >next</a> |</li>
        <li class="right" >
          <a href="swisstext.cmd.scraping.tools.html" title="Command line scraping tools"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SwissText  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="apireference.html" >API Reference</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="swisstext.cmd.html" >Commandline tools</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Lucy Linder.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>