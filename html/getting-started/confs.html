

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuration options &mdash; SwissText  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API Overview" href="../api/index.html" />
    <link rel="prev" title="Usage" href="usage.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> SwissText
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installation-on-a-linux-server">Installation on a Linux server</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installation-on-macos">Installation on MacOS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="usage.html#running-mongodb">Running MongoDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#running-the-frontend">Running the frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#running-the-backend">Running the backend</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#current-best-pipeline-configuration">Current ?best? pipeline configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-default-tools">Using default tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-extra-tools">Using extra tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tool-dependencies">Tool dependencies</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/cmd/package.html">swisstext.cmd</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/cmd/package.html#module-swisstext.cmd.base_config">Configuration files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/cmd/package.html#module-swisstext.cmd.link_utils">Link utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/package.html#dealing-with-links-in-a-page">Dealing with links in a page</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/package.html#dealing-with-search-results">Dealing with search results</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/cmd/scraping/package.html">swisstext.cmd.scraping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/cmd/scraping/package.html#st-scrape">st_scrape</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/package.html#st-scrape-dump-config">dump_config</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/package.html#st-scrape-from-file">from_file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/package.html#st-scrape-from-mongo">from_mongo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/package.html#st-scrape-gen-seeds">gen_seeds</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/cmd/scraping/tool-interfaces.html">Tool interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/cmd/scraping/tool-implementations.html">Tool implementations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/tool-implementations.html#module-swisstext.cmd.scraping.tools.basic_decider">Deciders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/tool-implementations.html#module-swisstext.cmd.scraping.tools.basic_seed_creator">Seed creators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/tool-implementations.html#module-swisstext.cmd.scraping.tools.bs_crawler">Crawlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/tool-implementations.html#module-swisstext.cmd.scraping.tools.norm_punc">Normalizers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/tool-implementations.html#module-swisstext.cmd.scraping.tools.punkt_splitter">Splitters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/tool-implementations.html#module-swisstext.cmd.scraping.tools.pattern_sentence_filter">Sentence Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/tool-implementations.html#link-filters">Link Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/tool-implementations.html#module-swisstext.cmd.scraping.tools.swigspot_langid">Language Detectors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/tool-implementations.html#module-swisstext.cmd.scraping.tools.console_saver">Savers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/cmd/scraping/pipeline-implementation.html">Pipeline implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/pipeline-implementation.html#module-swisstext.cmd.scraping.config">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/pipeline-implementation.html#module-swisstext.cmd.scraping.data">Data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/pipeline-implementation.html#module-swisstext.cmd.scraping.page_queue">Queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/scraping/pipeline-implementation.html#module-swisstext.cmd.scraping.pipeline">Pipeline</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/cmd/searching/package.html">swisstext.cmd.searching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/cmd/searching/package.html#st-search">st_search</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/searching/package.html#st-search-dump-config">dump_config</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/searching/package.html#st-search-from-file">from_file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/searching/package.html#st-search-from-mongo">from_mongo</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/cmd/searching/tool-interfaces.html">Tool interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/cmd/searching/tool-implementations.html">Tool implementations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/searching/tool-implementations.html#module-swisstext.cmd.searching.tools.console_saver">Savers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/searching/tool-implementations.html#module-swisstext.cmd.searching.tools.google_search">Searchers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/cmd/searching/pipeline-implementation.html">Pipeline implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/searching/pipeline-implementation.html#module-swisstext.cmd.searching.config">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/searching/pipeline-implementation.html#module-swisstext.cmd.searching.data">Data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/cmd/searching/pipeline-implementation.html#module-swisstext.cmd.searching.pipeline">Search engine</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/mongo/package.html">swisstext.mongo</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/mongo/package.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/mongo/package.html#collections">Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/mongo/package.html#about-the-code">About the code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/mongo/definitions.html">Abstract Definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/mongo/definitions.html#module-swisstext.mongo.abstract.generic">Common structures and embedded documents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/mongo/definitions.html#module-swisstext.mongo.abstract.seeds">Seed collection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/mongo/definitions.html#module-swisstext.mongo.abstract.sentences">Sentences collection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/mongo/definitions.html#module-swisstext.mongo.abstract.urls">URLs and Blacklist collections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/mongo/definitions.html#module-swisstext.mongo.abstract.users">Users collection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/mongo/definitions.html#module-swisstext.mongo.models">MongoEngine-ready classes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/alswiki/package.html">swisstext.alswiki</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/alswiki/package.html#st-alswiki">st_alswiki</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/alswiki/package.html#st-alswiki-download">download</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/alswiki/package.html#st-alswiki-parse">parse</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/alswiki/package.html#st-alswiki-process">process</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/alswiki/package.html#st-alswiki-txt">txt</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/alswiki/package.html#processing-alswiki-dumps">Processing Alswiki dumps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/alswiki/package.html#processing-text-files">Processing text files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../todos.html">TODOs</a></li>
</ul>
<p class="caption"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ideas.html">Ideas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ideas.html#sentence-filtering">Sentence Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ideas.html#url-filtering">URL Filtering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../aboutthedoc.html">About this documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../aboutthedoc.html#generation">Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aboutthedoc.html#deploying-on-github-pages">Deploying on github-pages</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SwissText</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Configuration options</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/derlin/swisstext/blob/master/docs/getting-started/confs.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuration-options">
<h1>Configuration options<a class="headerlink" href="#configuration-options" title="Permalink to this headline">¶</a></h1>
<p>The behavior of the scraper highly depends on the tools chosen, which is defined in a configuration YAML file (see <a class="reference internal" href="../api/cmd/package.html#module-swisstext.cmd.base_config" title="swisstext.cmd.base_config"><code class="xref py py-mod docutils literal notranslate"><span class="pre">swisstext.cmd.base_config</span></code></a>).</p>
<p>Some tool options are more suited together, so in this section I try to detail some of the tips and tricks to get the best system.</p>
<div class="section" id="current-best-pipeline-configuration">
<h2>Current ?best? pipeline configuration<a class="headerlink" href="#current-best-pipeline-configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-default-tools">
<h3>Using default tools<a class="headerlink" href="#using-default-tools" title="Permalink to this headline">¶</a></h3>
<p>The current best configuration for Swiss-German spotting is the following:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># scraping</span>
<span class="nt">pipeline</span><span class="p">:</span>
  <span class="nt">crawler</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.JustextCrawler</span>
  <span class="nt">normalizer</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.Normalizer</span>
  <span class="nt">splitter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.MocySplitter</span>
  <span class="nt">sentence_filter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.PatternSentenceFilter</span>
  <span class="nt">sg_detector</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.SwigspotLangid</span>
  <span class="nt">decider</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.OneNewSgDecider</span>
  <span class="nt">saver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.MongoSaver</span>

<span class="nt">crawler_options</span><span class="p">:</span>
  <span class="nt">keep_bad</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">normalizer_options</span><span class="p">:</span>
  <span class="nt">fix_encoding</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">strip_emojis</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">splitter_options</span><span class="p">:</span>
  <span class="nt">more</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">keep_newlines</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="c1"># searching</span>
<span class="nt">search_engine</span><span class="p">:</span>
  <span class="nt">query_builder</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.QuoteWordsQueryBuilder</span>
  <span class="nt">saver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.MongoSaver</span>
  <span class="nt">searcher</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.StartPageGeneratorFactory</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../api/cmd/scraping/tool-implementations.html#swisstext.cmd.scraping.tools.justext_crawler.JustextCrawler" title="swisstext.cmd.scraping.tools.justext_crawler.JustextCrawler"><code class="xref py py-class docutils literal notranslate"><span class="pre">JustextCrawler</span></code></a> is quite efficient at extracting <em>and</em>
classifying paragraphs of text. Using the <code class="docutils literal notranslate"><span class="pre">keep_bad</span></code> option, we discard paragraphs such as short titles, breadcrumbs,
post meta, etc. Setting <code class="docutils literal notranslate"><span class="pre">keep_bad</span></code> to true should impact the pipeline much, assuming the filter does its job properly.</p>
<p>Then, the <a class="reference internal" href="../api/cmd/scraping/tool-implementations.html#swisstext.cmd.scraping.tools.norm_punc.Normalizer" title="swisstext.cmd.scraping.tools.norm_punc.Normalizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Normalizer</span></code></a>
will take care of unifying unicode. The <code class="docutils literal notranslate"><span class="pre">fix_encoding</span></code> option is important, as many GSW sentences
are found on old forums with databases improperly configured
(e.g. <a class="reference external" href="http://www.celica-t23.ch/new/wbb2/thread.php?threadid=3566">celica-t23.ch</a> uses twos encodings …).
However, the <code class="docutils literal notranslate"><span class="pre">strip_emojis</span></code> option is set to false, because it adds a <em>huge</em> overhead for little outcome (not so many pages have unicode emojis). The only downside is that it messes with the splitter, which is not able to properly segment sentences when emojis are present.</p>
<p>The best splitter so far is the <a class="reference internal" href="../api/cmd/scraping/tool-implementations.html#swisstext.cmd.scraping.tools.mocy_splitter.MocySplitter" title="swisstext.cmd.scraping.tools.mocy_splitter.MocySplitter"><code class="xref py py-class docutils literal notranslate"><span class="pre">MocySplitter</span></code></a>, an improvement
upon Moses <code class="docutils literal notranslate"><span class="pre">split-sentences.perl</span></code>. Note that <em>using a normalizer is vital</em> for it to work well,
since the splitter is not configured to handle all possible space/dash/etc. unicode codepoints.
The <code class="docutils literal notranslate"><span class="pre">more</span></code> option will split cleverly on <code class="docutils literal notranslate"><span class="pre">:;</span></code> (here, no real arguments, just a matter of taste).
The <code class="docutils literal notranslate"><span class="pre">keep_newlines</span></code> option is really interesting, but <em>only in conjunction with the JustextCrawler</em>:
justext already returns paragraphs delimited by newlines, so it is better to keep those newlines and thus avoid to
combine a title or a button text (both lacking punctuation) with a content.
To see the difference, try crawling <a class="reference external" href="https://twitter.com/agnesiumm/status/1171531642969546757?lang=en-gb">twitter</a>
with and without <code class="docutils literal notranslate"><span class="pre">keep_newlines</span></code> ! Without, we will basically crawl all possible versions of a page (different <code class="docutils literal notranslate"><span class="pre">lang=xxx</span></code>) and always find new sentences because button texts are appended and change depending on the language…</p>
<p>The rest of the tools are less critical and their behavior is not impacted by the behavior of the previous tools.</p>
</div>
<div class="section" id="using-extra-tools">
<h3>Using extra tools<a class="headerlink" href="#using-extra-tools" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># scraping</span>
<span class="nt">pipeline</span><span class="p">:</span>
  <span class="nt">crawler</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.JustextCrawler</span>
  <span class="nt">normalizer</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.Normalizer</span>
  <span class="nt">splitter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.MocySplitter</span>
  <span class="nt">sentence_filter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.PatternSentenceFilter</span>
  <span class="nt">decider</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">decider.Decider</span>
  <span class="nt">url_filter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">extra.sg_url_filter.SgUrlFilter</span>
  <span class="nt">sg_detector</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">extra.bert_torch_predictor.BertPredictor</span>

<span class="nt">crawler_options</span><span class="p">:</span>
  <span class="nt">keep_bad</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">normalizer_options</span><span class="p">:</span>
  <span class="nt">fix_encoding</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">strip_emojis</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">splitter_options</span><span class="p">:</span>
  <span class="nt">keep_newlines</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">more</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">sg_detector_options</span><span class="p">:</span>
  <span class="nt">chunk_size</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1000</span>

<span class="c1"># searching</span>
<span class="nt">search_engine</span><span class="p">:</span>
  <span class="nt">query_builder</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.QuoteWordsQueryBuilder</span>
  <span class="nt">saver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.MongoSaver</span>
  <span class="nt">searcher</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.StartPageGeneratorFactory</span>

<span class="c1"># general options</span>
<span class="nt">options</span><span class="p">:</span>
  <span class="nt">crawl_depth</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
  <span class="nt">max_fetches</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">-1</span>
  <span class="nt">max_results</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">20</span>
  <span class="nt">min_proba</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.92</span>
  <span class="nt">num_workers</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
</pre></div>
</div>
<p>The big difference here is the use of a custom URL filter, decider and language detector. More precisely:</p>
<ol class="arabic simple">
<li><p><em>URL filter</em>: the <code class="docutils literal notranslate"><span class="pre">extra</span></code> directory contains a specific implementation of URL filter that deals with some of GSW blogs that have strange URL patterns. It ensures we do not scrape for nothing by blacklisting some and normalizing others;</p></li>
<li><p><em>SG detector</em>: we use a better language identifier, a BERT model that was finetuned on the task of language identification; The model is available in another repo, the code in <code class="docutils literal notranslate"><span class="pre">extra</span></code> is just a wrapper around it to make it compatible with swisstext;</p></li>
<li><p><em>decider</em>: the decider implementation varies depending on the needs. On our latest runs to find Swiss German quickly, we used the following:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Decider</span><span class="p">(</span><span class="n">BasicDecider</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">should_page_be_crawled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="p">:</span> <span class="n">Page</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns true only if the page is new.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">page</span><span class="o">.</span><span class="n">is_new</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">should_children_be_crawled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="p">:</span> <span class="n">Page</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">should_children_be_crawled</span><span class="p">(</span><span class="n">page</span><span class="p">):</span>
            <span class="c1"># just don&#39;t try going further if no new sg is found</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">new_sg</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span>
</pre></div>
</div>
<p>More information can be found in our publication:
<a class="reference external" href="https://arxiv.org/abs/1912.00159">Automatic Creation of Text Corpora for Low-Resource Languages from the Internet: The Case of Swiss German</a>.</p>
</div>
</div>
<div class="section" id="tool-dependencies">
<h2>Tool dependencies<a class="headerlink" href="#tool-dependencies" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>splitters don’t work well without normalization of the text as they are made to work with the basic character set (vs all the unicode variations);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MocySplitter.keep_newlines</span></code> option should be used only in conjunction with <code class="docutils literal notranslate"><span class="pre">JustextCrawler</span></code> (and the default joiner);</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../api/index.html" class="btn btn-neutral float-right" title="API Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="usage.html" class="btn btn-neutral float-left" title="Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Lucy Linder

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>